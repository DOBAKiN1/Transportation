<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Cargo Transportation Services</title>
		<link rel="stylesheet" type="text/css" href="../static/styles.css">
		<link rel='stylesheet' type="text/css" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css'>
		<link rel="stylesheet" type="text/css" href="../static/footerStyle.css">
		<link rel="stylesheet" href="../static/tableStyle.css">
		
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		
		
		
	</head>
	<body>
		<header w3-include-html="header.html" class="p-3 bg-dark text-white"> </header>	
		
		
		<div class="headerLike"></div>
		<main>
			
			
			{% if current_user.className == "Admin" %}
			<section class="containerr">
				<form id="getReportForm">
					<button id="getReportBtn" type="submit" class="button button-block">Отримати звіт</button>
				</form>
				<form id="addDriverForm">
					<label>Введіть email клієнта щоб перетворити його в водія</label>
					<input name="clientEmail" id="clientEmail" type="text" required/>
					<button id="addDriverBtn" type="submit" class="button button-block">Додати водія</button>
				</form>
			</section>
			{% endif %}
			{% if current_user.className == "Client" %}
			{% if all_user_cargo|length > 0 %}
			<table class="table-fill">
				<thead>
					<tr>
						<th class="text-left">Звідки</th>
						<th class="text-left">Куди</th>
						<th class="text-left">Дистанція</th>
						<th class="text-left">Ціна</th>
						<th class="text-left">Вага</th>
						<th class="text-left">Опис</th>
						<th class="text-left">Розмір</th>
						<th class="text-left">Додаткова інформація</th>
					</tr>
				</thead>
				<tbody class="table-hover">
					{% set enumerate = namespace() %}
					{% set enumerate.index = 0 %}
					{% for cargo in all_user_cargo %}
					{% set enumerate.index = enumerate.index + 1 %}
					
					{% for route in routes %}
					{% if route.id == cargo.routeId %}
					
					<tr>
						<td class="text-left">{{route.start}}</td>
						<td class="text-left">{{route.end}}</td>
						<td class="text-left">{{route.distance}}</td>
						<td class="text-left">{{route.payment}}</td>
						<td class="text-left">{{cargo.weight}}</td>
						<td class="text-left">{{cargo.cargoInformation}}</td>
						<td class="text-left">{{cargo.size}}</td>
						<td class="text-left">{{cargo.addInfo}}</td>
					</tr>
					{% endif %}
					{% endfor %}
					{% endfor %}
					
				</tbody>
			</table>
			
			{% endif %}
			<section class="containerr">
				<form id="requestForm">
					
					<label>Вага в кг<span class="req">*</span></label>
					<input name="weight" id="weight" type="number" min="0" required/>
					
					
					<div class="field-wrap">
						<label>Опис<span class="req">*</span></label>
						<input name="cargoInformation" id="cargoInformation" autocomplete="off" required>
					</div>
					
					<div class="field-wrap">
						<label>Розмір<span class="req">*</span></label>
						<input name="size" id="size" autocomplete="off" required>
					</div>
					
					<label>Виберіть маршрут:<span class="req">*</span></label>
					{% set enumerate = namespace() %}
					{% set enumerate.index = 0 %}
					
					<select id="route" name="route">
						{% for route in routes %}
						{% set enumerate.index = enumerate.index + 1 %}
						<option value="{{ route.id }}">{{ route.start }}-{{ route.end }}</option>
						{% endfor %}
					</select>
					
					
					<div class="field-wrap">
						<label>Додаткова інформація</label>
						<input name="addInfo" id="addInfo" autocomplete="off">
					</div>
					
					
					<button id="submitRequestBtn" type="submit" class="button button-block">Відправити заявку</button>
					<br><br>
				</form>
			</section>
			{% endif %}
			{% if current_user.className == "Driver" %}
			{% if current_user.cargoID == -1 %}
			<table class="table-fill">
				<thead>
					<tr>
						<th class="text-left">Звідки</th>
						<th class="text-left">Куди</th>
						<th class="text-left">Дистанція</th>
						<th class="text-left">Ціна</th>
						<th class="text-left">Вага</th>
						<th class="text-left">Опис</th>
						<th class="text-left">Розмір</th>
						<th class="text-left">Додаткова інформація</th>
					</tr>
				</thead>
				<tbody class="table-hover">
					{% set enumerate = namespace() %}
					{% set enumerate.index = 0 %}
					{% for cargo in allCargo %}
					{% if cargo.driverId == -1 %}
					{% set enumerate.index = enumerate.index + 1 %}
					
					{% for route in routes %}
					{% if route.id == cargo.routeId %}
					
					<tr>
						<td class="text-left">{{route.start}}</td>
						<td class="text-left">{{route.end}}</td>
						<td class="text-left">{{route.distance}}</td>
						<td class="text-left">{{route.payment}}</td>
						<td class="text-left">{{cargo.weight}}</td>
						<td class="text-left">{{cargo.cargoInformation}}</td>
						<td class="text-left">{{cargo.size}}</td>
						<td class="text-left">{{cargo.addInfo}}</td>
					</tr>
					{% endif %}
					{% endfor %}
					{% endif %}
					{% endfor %}
					
				</tbody>
			</table>
			{% set enumerate = namespace() %}
			{% set enumerate.index = 0 %}
			
			
			{% set enumerate.index = enumerate.index + 1 %}
			
			
			<section class="containerr">
				<form id="driverAcceptForm" >
					<h1>Виберіть маршрут</h1>
					<select name="driverRouteId">
						{% for cargo in allCargo %}
						{% for route in routes %}
						{% if route.id == cargo.routeId %}
						{% if cargo.driverId == -1 %}
						{% set enumerate.index = enumerate.index + 1 %}
						<option name="driverRouteId" value="{{ cargo.id }}">{{ route.start }}-{{ route.end}}-{{ route.distance }}-{{cargo.weight}}-{{cargo.cargoInformation}}</option>
						{% endif %}
						{% endif %}
						{% endfor %}
						{% endfor %}
					</select>
					<br><br>
					<button id="driverAcceptBtn" type="submit" class="button button-block">Підтвердити заказ</button>
				</form>
			</section>
			<br><br>
			{% else %}
			<section class="containerr">
				<h1>Ваш заказ</h1>
			</section>
			
			<table class="table-fill">
				<thead>
					<tr>
						<th class="text-left">Звідки</th>
						<th class="text-left">Куди</th>
						<th class="text-left">Дистанція</th>
						<th class="text-left">Ціна</th>
						<th class="text-left">Вага</th>
						<th class="text-left">Опис</th>
						<th class="text-left">Розмір</th>
						<th class="text-left">Додаткова інформація</th>
					</tr>
				</thead>
				<tbody class="table-hover">
					{% set enumerate = namespace() %}
					{% set enumerate.index = 0 %}
					{% for cargo in driverCargo %}
					
					{% set enumerate.index = enumerate.index + 1 %}
					{% for route in routes %}
					{% if route.id == cargo.routeId %}
					
					<tr>
						<td class="text-left">{{route.start}}</td>
						<td class="text-left">{{route.end}}</td>
						<td class="text-left">{{route.distance}}</td>
						<td class="text-left">{{route.payment}}</td>
						<td class="text-left">{{cargo.weight}}</td>
						<td class="text-left">{{cargo.cargoInformation}}</td>
						<td class="text-left">{{cargo.size}}</td>
						<td class="text-left">{{cargo.addInfo}}</td>
					</tr>
					{% endif %}
					{% endfor %}
					{% endfor %}
					
				</tbody>
			</table>
			<section class="containerr">
				<form id="driverConfirmForm" method="POST" action="/driverConfirm">
					<button id="driverConfirmBtn" type="submit" class="button button-block">Я виконав заказ</button>
				</form>
			</section>
			{% endif %}
			{% endif %}
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		</main>
		<footer w3-include-html="footer.html" class="site-footer"> </footer>
	</body>
	<script  src="../static/javaScript.js"></script>
	<script  src="../static/accountScript.js"></script>
	
</html>
